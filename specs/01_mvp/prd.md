# P01: 文本资产转风格化博客文章 MVP

## 产品需求文档 (PRD)

### 1. 概述

**版本**: v1.0
**创建日期**: 2025-12-23
**状态**: 规划中

#### 1.1 核心目标

构建一个本地化工具，实现 txt 文本资产到风格化博客文章的端到端转换，支持多种写作风格配置和智能 AI 生成。

#### 1.2 核心价值

- **资产统一管理**: txt 文本资产的 CRUD 管理，使用 UUID 唯一标识
- **风格灵活配置**: 支持用户自定义扩展提示词风格（WSJ、钻石型等）
- **AI 智能生成**: 基于智谱 AI API 实现高质量风格化转换
- **简洁高效**: 本地优先，无需复杂部署，开箱即用

### 2. 用户故事

#### 2.1 主要用户场景

**用户故事1：文本资产管理**
> 作为内容创作者，我希望能够管理我的 txt 文本资产，支持新增、查看、编辑和删除操作，这样我可以方便地组织待处理的文本内容。

**用户故事2：风格化文章生成**
> 作为内容创作者，我希望能够选择某个 txt 资产，配置提示词风格（如 WSJ 风格），通过 AI 生成符合该风格的博客文章，这样我可以快速将原始文本转化为高质量内容。

**用户故事3：提示词自定义**
> 作为高级用户，我希望能够创建和编辑自定义提示词模板，扩展支持更多写作风格，这样我可以灵活地适配不同的内容需求。

### 3. 功能需求

#### 3.1 In-Scope（本次交付）

| 功能模块 | 描述 | 优先级 |
|---------|------|--------|
| 文本资产 CRUD | txt 文件的增删改查，UUID v4 标识 | P0 |
| 提示词配置管理 | 本地文件系统管理提示词模板（初始 WSJ、钻石型） | P0 |
| 智谱 AI 集成 | 使用 OpenAI SDK 兼容接口调用智谱 API | P0 |
| 文章生成 | 根据资产 + 提示词生成风格化文章并存储 | P0 |
| 基础前端界面 | 资产列表、选择器、生成按钮、结果展示 | P0 |

#### 3.2 Out-of-Scope（本次坚决不做）

- YouTube 字幕下载（已存在外部工具，如 youtube-subtitle-downloader）
- 多平台适配输出（公众号、微博等）
- 版本管理系统
- 批量处理功能
- 分块处理长内容（4小时+播客）
- 用户认证与权限
- 分布式部署

### 4. 数据模型

#### 4.1 文本资产 (TextAsset)

```typescript
interface TextAsset {
  id: string;           // UUID v4
  title: string;        // 资产标题
  content: string;      // 文本内容
  createdAt: Date;      // 创建时间
  updatedAt: Date;      // 更新时间
  metadata?: {
    source?: string;    // 来源标识（可选）
    wordCount?: number; // 字数统计
  };
}
```

#### 4.2 提示词配置 (PromptConfig)

```typescript
interface PromptConfig {
  id: string;           // 配置 ID（文件名或标识符）
  name: string;         // 风格名称（如 "WSJ风格"）
  description: string;  // 风格描述
  systemPrompt: string; // 系统提示词
  userTemplate: string; // 用户消息模板，包含 {content} 占位符
  createdAt: Date;
}
```

#### 4.3 生成文章 (GeneratedArticle)

```typescript
interface GeneratedArticle {
  id: string;           // UUID v4
  assetId: string;      // 源资产 ID
  styleId: string;      // 使用的风格 ID
  content: string;      // 生成内容
  model: string;        // 使用的模型（如 glm-4.5）
  createdAt: Date;
  tokensUsed?: number;  // Token 消耗（可选）
}
```

### 5. 风格定义

#### 5.1 WSJ 风格 (prompt_wsj.md)

**特点**: 专业商业分析风格，数据驱动，权威客观

```markdown
你是《华尔街日报》的资深记者。请根据以下内容撰写一篇专业的商业分析文章。

## 文章结构要求：
1. **标题**: 突出核心洞察，使用数据驱动标题
2. **导语**: 3-4句话概括核心观点和重要性
3. **主体**:
   - 背景介绍（2-3段）
   - 关键数据和分析（3-4段）
   - 专家观点和引用（2-3段）
   - 影响分析（2-3段）
4. **结论**: 总结观点并提出行动建议

## 写作风格要求：
- 使用专业术语，但避免过度学术化
- 每个观点都要有数据或事实支撑
- 保持客观、中立的语调
- 段落长度控制在150-200字
- 避免感叹句和情感化表达

## 输入内容：
{content}
```

#### 5.2 钻石型风格 (prompt_diamond.md)

**特点**: 金字塔倒置结构，结论先行，层次分明

```markdown
请使用钻石型结构（结论先行）撰写以下内容的文章。

## 钻石型结构说明：
钻石型写作采用"倒金字塔"结构，核心原则是"结论先行"：

1. **顶层（结论）**: 一句话概括核心观点
2. **中层（论证）**: 3-5个关键论据，每个论据一段
3. **底层（细节）**: 支撑论据的具体事实、数据、案例

## 写作要求：
- 开头第一句直接给出结论
- 每个论点独立成段，段首使用主题句
- 使用"第一、第二、第三"或"首先、其次、再次"等连接词
- 从最重要到最次要排列论点
- 结尾呼应开头结论，简洁有力

## 输入内容：
{content}
```

### 6. 技术集成

#### 6.1 智谱 API 配置

```typescript
interface ZhipuAIConfig {
  apiKey: string;       // 从环境变量读取 ZHIPU_API_KEY
  baseURL: string;      // https://open.bigmodel.cn/api/paas/v4/
  model: string;        // glm-4.5 或 glm-4-air-250414
  timeout: number;      // 30000ms
  maxRetries: number;   // 3
}
```

### 7. 验收标准

#### 7.1 功能验收

- [ ] 能够新增 txt 资产并自动生成 UUID
- [ ] 能够查看、编辑、删除现有资产
- [ ] 能够查看可用提示词配置列表
- [ ] 能够选择资产 + 提示词生成文章
- [ ] 生成结果能够保存和查看
- [ ] WSJ 风格生成符合专业商业分析特征
- [ ] 钻石型风格生成符合结论先行特征

#### 7.2 技术验收

- [ ] TypeScript 类型完整，无 `any` 类型
- [ ] 调用智谱 API 成功，错误处理完善
- [ ] 前端界面响应流畅，无明显卡顿
- [ ] 文件存储路径清晰，数据不丢失

#### 7.3 用户体验验收

- [ ] 操作流程直观，无需复杂学习
- [ ] 错误提示友好清晰
- [ ] 生成进度有反馈

### 8. 后续迭代方向

此 MVP 完成后，后续版本可考虑：

- **02_mvp**: YouTube 字幕集成
- **03_mvp**: 版本管理与历史对比
- **04_mvp**: 多平台适配输出
- **05_mvp**: 批量处理与队列管理

---

**文档版本**: v1.0
**创建日期**: 2025-12-23
**P-序列**: P01
